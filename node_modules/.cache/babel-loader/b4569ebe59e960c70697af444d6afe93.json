{"ast":null,"code":"import { ADD_TO_FAVORITES, GET_LOGGED_USER, UPDATE_USER, DELETE_ADDRESS, START_LOADING_USER, END_LOADING_USER, LOGOUT, GET_USERS, GET_USER_BY_ID } from \"../constants/actionTypes\";\nimport * as api from \"../api\";\nexport const getLoggedUser = () => async dispatch => {\n  try {\n    dispatch({\n      type: START_LOADING_USER\n    });\n    const user = JSON.parse(localStorage.getItem(\"profile\"));\n\n    if (user) {\n      const {\n        data\n      } = await api.getUserById(user.result._id);\n      dispatch({\n        type: GET_LOGGED_USER,\n        payload: data\n      });\n      dispatch({\n        type: END_LOADING_USER\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getUserById = id => async dispatch => {\n  try {\n    dispatch({\n      type: START_LOADING_USER\n    });\n    const {\n      data\n    } = await api.getUserById(id);\n    dispatch({\n      type: GET_USER_BY_ID,\n      payload: data\n    });\n    dispatch({\n      type: END_LOADING_USER\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const getUsers = (searchQuery, role, page) => async dispatch => {\n  try {\n    dispatch({\n      type: START_LOADING_USER\n    });\n    const {\n      data: {\n        data,\n        currentPAge,\n        numberOfPages\n      }\n    } = await api.getUsers(searchQuery, role, page);\n    dispatch({\n      type: GET_USERS,\n      payload: {\n        data,\n        currentPAge,\n        numberOfPages\n      }\n    });\n    dispatch({\n      type: END_LOADING_USER\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const addToFavorites = (userId, itemId) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.addToFavorites(userId, {\n      itemId: itemId\n    });\n    dispatch({\n      type: ADD_TO_FAVORITES,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const updateAddress = (id, address, addressId) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.updateAddress(id, address, addressId);\n    console.log(data);\n    dispatch({\n      type: UPDATE_USER,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const updateInfo = (id, info) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.updateInfo(id, info);\n    dispatch({\n      type: UPDATE_USER,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const updateRole = (id, role) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.updateRole(id, role);\n    dispatch({\n      type: UPDATE_USER,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const updatePassword = (id, password, history) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.updatePassword(id, password);\n    dispatch({\n      type: UPDATE_USER,\n      payload: data\n    });\n    dispatch({\n      type: LOGOUT\n    });\n    history.push(\"/\");\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const deleteAccount = (id, history) => async dispatch => {\n  try {\n    await api.deleteAccount(id);\n    dispatch({\n      type: LOGOUT\n    });\n    history.push(\"/\");\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const addAddress = (id, address) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.addAddress(id, address);\n    dispatch({\n      type: UPDATE_USER,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const deleteAddress = (userId, addressId) => async dispatch => {\n  try {\n    const {\n      data\n    } = await api.deleteAddress(userId, addressId);\n    dispatch({\n      type: DELETE_ADDRESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"sources":["C:/Users/lukas/Desktop/Programowanko/Projekty/benzen/client/src/actions/userActions.js"],"names":["ADD_TO_FAVORITES","GET_LOGGED_USER","UPDATE_USER","DELETE_ADDRESS","START_LOADING_USER","END_LOADING_USER","LOGOUT","GET_USERS","GET_USER_BY_ID","api","getLoggedUser","dispatch","type","user","JSON","parse","localStorage","getItem","data","getUserById","result","_id","payload","error","console","log","id","getUsers","searchQuery","role","page","currentPAge","numberOfPages","addToFavorites","userId","itemId","updateAddress","address","addressId","updateInfo","info","updateRole","updatePassword","password","history","push","deleteAccount","addAddress","deleteAddress"],"mappings":"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","sourcesContent":["import {\r\n  ADD_TO_FAVORITES,\r\n  GET_LOGGED_USER,\r\n  UPDATE_USER,\r\n  DELETE_ADDRESS,\r\n  START_LOADING_USER,\r\n  END_LOADING_USER,\r\n  LOGOUT,\r\n  GET_USERS,\r\n  GET_USER_BY_ID,\r\n} from \"../constants/actionTypes\";\r\nimport * as api from \"../api\";\r\n\r\nexport const getLoggedUser = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING_USER });\r\n    const user = JSON.parse(localStorage.getItem(\"profile\"));\r\n    if (user) {\r\n      const { data } = await api.getUserById(user.result._id);\r\n      dispatch({ type: GET_LOGGED_USER, payload: data });\r\n      dispatch({ type: END_LOADING_USER });\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const getUserById = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING_USER });\r\n    const { data } = await api.getUserById(id);\r\n    dispatch({ type: GET_USER_BY_ID, payload: data });\r\n    dispatch({ type: END_LOADING_USER });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const getUsers = (searchQuery, role, page) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: START_LOADING_USER });\r\n    const {\r\n      data: { data, currentPAge, numberOfPages },\r\n    } = await api.getUsers(searchQuery, role, page);\r\n    dispatch({\r\n      type: GET_USERS,\r\n      payload: { data, currentPAge, numberOfPages },\r\n    });\r\n    dispatch({ type: END_LOADING_USER });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const addToFavorites = (userId, itemId) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.addToFavorites(userId, { itemId: itemId });\r\n    dispatch({ type: ADD_TO_FAVORITES, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const updateAddress = (id, address, addressId) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.updateAddress(id, address, addressId);\r\n    console.log(data);\r\n    dispatch({ type: UPDATE_USER, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const updateInfo = (id, info) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.updateInfo(id, info);\r\n    dispatch({ type: UPDATE_USER, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const updateRole = (id, role) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.updateRole(id, role);\r\n    dispatch({ type: UPDATE_USER, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const updatePassword = (id, password, history) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.updatePassword(id, password);\r\n    dispatch({ type: UPDATE_USER, payload: data });\r\n    dispatch({ type: LOGOUT });\r\n    history.push(\"/\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const deleteAccount = (id, history) => async (dispatch) => {\r\n  try {\r\n    await api.deleteAccount(id);\r\n    dispatch({ type: LOGOUT });\r\n    history.push(\"/\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const addAddress = (id, address) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.addAddress(id, address);\r\n    dispatch({ type: UPDATE_USER, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const deleteAddress = (userId, addressId) => async (dispatch) => {\r\n  try {\r\n    const { data } = await api.deleteAddress(userId, addressId);\r\n    dispatch({ type: DELETE_ADDRESS, payload: data });\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}