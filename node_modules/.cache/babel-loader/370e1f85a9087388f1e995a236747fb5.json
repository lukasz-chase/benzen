{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\lukas\\\\Desktop\\\\Programowanko\\\\Projekty\\\\benzen\\\\client\\\\src\\\\components\\\\AddressComponent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; //styling\n\nimport styled from \"styled-components\"; //data\n\nimport { addressInputs } from \"../descriptions/inputs\"; //components\n\nimport Input from \"../components/Input\";\nimport Button from \"../components/Button\";\nimport Address from \"../components/Address\"; //actions\n\nimport { updateAddress, addAddress } from \"../actions/userActions\"; //redux\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst AddressComponent = () => {\n  _s();\n\n  var _user$address2;\n\n  const [addressData, setAddressData] = useState({\n    street: \"\",\n    city: \"\",\n    postalCode: \"\",\n    houseNr: \"\",\n    phone: \"\"\n  });\n  const [addressId, setAddressId] = useState(0);\n  const [action, setAction] = useState(\"change\");\n  const {\n    user\n  } = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (user) {\n      var _user$address$;\n\n      setAddressId(user === null || user === void 0 ? void 0 : (_user$address$ = user.address[0]) === null || _user$address$ === void 0 ? void 0 : _user$address$._id);\n    }\n  }, [user]); //handlers\n\n  const clearAddress = () => setAddressData({\n    street: \"\",\n    city: \"\",\n    postalCode: \"\",\n    houseNr: \"\",\n    phone: \"\"\n  });\n\n  const chooseAddressHandler = ({\n    city,\n    houseNr,\n    street,\n    postalCode,\n    phone,\n    _id\n  }) => {\n    setAddressData({\n      street: street,\n      city: city,\n      postalCode: postalCode,\n      houseNr: houseNr,\n      phone: phone\n    });\n    setAction(\"change\");\n    setAddressId(_id);\n  }; //add new address\n\n\n  const newAddressHandler = () => {\n    setAction(\"add\");\n    clearAddress();\n    setAddressId(\"\");\n  };\n\n  const addressHandler = () => {\n    if (action === \"change\") {\n      dispatch(updateAddress(user._id, {\n        address: addressData\n      }));\n    } else {\n      dispatch(addAddress(user._id, {\n        address: addressData\n      }));\n    }\n\n    clearAddress();\n  };\n\n  useEffect(() => {\n    var _user$address;\n\n    if ((user === null || user === void 0 ? void 0 : (_user$address = user.address) === null || _user$address === void 0 ? void 0 : _user$address.length) === 0) {\n      newAddressHandler();\n    }\n  }, [user]);\n  useEffect(() => {\n    user.address.map(add => add.id === addressId ? chooseAddressHandler(add) : add);\n  }, [user, addressId]);\n\n  const handleForm = e => setAddressData({ ...addressData,\n    [e.target.name]: e.target.value\n  });\n\n  return /*#__PURE__*/_jsxDEV(AddressWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"My account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"line\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Addresses\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"choose-address\",\n      children: user === null || user === void 0 ? void 0 : (_user$address2 = user.address) === null || _user$address2 === void 0 ? void 0 : _user$address2.map(address => /*#__PURE__*/_jsxDEV(Address, {\n        chooseAddressHandler: chooseAddressHandler,\n        address: address,\n        userId: user._id,\n        setAddressId: setAddressId\n      }, address._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"line\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => newAddressHandler(),\n      label: \"Add new address\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inputs-grid\",\n      children: addressInputs.map(input => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-item\",\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          label: input.label,\n          name: input.name,\n          value: addressData[input.name],\n          type: input.type,\n          handleChange: e => handleForm(e),\n          required: input.required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)\n      }, input.label, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => addressHandler(),\n      label: action === \"change\" ? \"Save changes\" : \"Add\",\n      variant: \"black\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddressComponent, \"mkIsI5xvpvUf0sCtv0at0918STU=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = AddressComponent;\nconst AddressWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-left: 2rem;\n  @media screen and (max-width: 1000px) {\n    margin: 0;\n  }\n  .choose-address {\n    display: flex;\n    align-items: start;\n    .active-address {\n      .checkbox {\n        background-color: black;\n      }\n    }\n    .single-address {\n      display: flex;\n      font-size: 0.8rem;\n      &:hover {\n        cursor: pointer;\n      }\n      .checkbox {\n        border: 1px solid rgba(0, 0, 0, 0.2);\n        width: 1rem;\n        height: 1rem;\n        margin: 0 1rem;\n        @media screen and (max-width: 1000px) {\n          width: 1rem;\n          height: 1rem;\n          border-radius: 1rem;\n          margin: 0 0.5rem;\n        }\n      }\n      .address-info {\n        display: flex;\n        flex-direction: column;\n        p {\n          margin: 5px 0;\n          font-weight: bold;\n          &:hover {\n            cursor: pointer;\n          }\n        }\n      }\n    }\n  }\n  .button-white {\n    @media screen and (max-width: 1000px) {\n      display: flex;\n      text-transform: upperCase;\n      justify-content: center;\n      width: 100%;\n      background-color: black;\n      margin: 1rem 0;\n      padding: 0;\n      font-size: 1.5rem;\n      color: White;\n    }\n  }\n`;\n_c2 = AddressWrapper;\nexport default AddressComponent;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AddressComponent\");\n$RefreshReg$(_c2, \"AddressWrapper\");","map":{"version":3,"sources":["C:/Users/lukas/Desktop/Programowanko/Projekty/benzen/client/src/components/AddressComponent.js"],"names":["React","useState","useEffect","styled","addressInputs","Input","Button","Address","updateAddress","addAddress","useDispatch","useSelector","AddressComponent","addressData","setAddressData","street","city","postalCode","houseNr","phone","addressId","setAddressId","action","setAction","user","state","dispatch","address","_id","clearAddress","chooseAddressHandler","newAddressHandler","addressHandler","length","map","add","id","handleForm","e","target","name","value","input","label","type","required","AddressWrapper","div"],"mappings":"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AAME,UAAA,QAAQ,EAAEI,KAAK,CAACG;AANlB;AAAA;AAAA;AAAA;AAAA;AADF,SAAUH,KAAK,CAACC,KAAhB;AAAA;AAAA;AAAA;AAAA,cADD;AADH;AAAA;AAAA;AAAA;AAAA,YAjBF,eA+BE,QAAC,MAAD;AACE,MAAA,OAAO,EAAE,MAAMX,cAAc,EAD/B;AAEE,MAAA,KAAK,EAAEV,MAAM,KAAK,QAAX,GAAsB,cAAtB,GAAuC,KAFhD;AAGE,MAAA,OAAO,EAAC;AAHV;AAAA;AAAA;AAAA;AAAA,YA/BF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAuCD,CA7GD;;GAAMV,gB;UAUaD,W,EACAD,W;;;KAXbE,gB;AA+GN,MAAMkC,cAAc,GAAG3C,MAAM,CAAC4C,GAAI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA3DA;MAAMD,c;AA6DN,eAAelC,gBAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n//styling\r\nimport styled from \"styled-components\";\r\n//data\r\nimport { addressInputs } from \"../descriptions/inputs\";\r\n//components\r\nimport Input from \"../components/Input\";\r\nimport Button from \"../components/Button\";\r\nimport Address from \"../components/Address\";\r\n//actions\r\nimport { updateAddress, addAddress } from \"../actions/userActions\";\r\n//redux\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nconst AddressComponent = () => {\r\n  const [addressData, setAddressData] = useState({\r\n    street: \"\",\r\n    city: \"\",\r\n    postalCode: \"\",\r\n    houseNr: \"\",\r\n    phone: \"\",\r\n  });\r\n  const [addressId, setAddressId] = useState(0);\r\n  const [action, setAction] = useState(\"change\");\r\n  const { user } = useSelector((state) => state.user);\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (user) {\r\n      setAddressId(user?.address[0]?._id);\r\n    }\r\n  }, [user]);\r\n  //handlers\r\n  const clearAddress = () =>\r\n    setAddressData({\r\n      street: \"\",\r\n      city: \"\",\r\n      postalCode: \"\",\r\n      houseNr: \"\",\r\n      phone: \"\",\r\n    });\r\n  const chooseAddressHandler = ({\r\n    city,\r\n    houseNr,\r\n    street,\r\n    postalCode,\r\n    phone,\r\n    _id,\r\n  }) => {\r\n    setAddressData({\r\n      street: street,\r\n      city: city,\r\n      postalCode: postalCode,\r\n      houseNr: houseNr,\r\n      phone: phone,\r\n    });\r\n    setAction(\"change\");\r\n    setAddressId(_id);\r\n  };\r\n  //add new address\r\n  const newAddressHandler = () => {\r\n    setAction(\"add\");\r\n    clearAddress();\r\n    setAddressId(\"\");\r\n  };\r\n  const addressHandler = () => {\r\n    if (action === \"change\") {\r\n      dispatch(updateAddress(user._id, { address: addressData }));\r\n    } else {\r\n      dispatch(addAddress(user._id, { address: addressData }));\r\n    }\r\n    clearAddress();\r\n  };\r\n  useEffect(() => {\r\n    if (user?.address?.length === 0) {\r\n      newAddressHandler();\r\n    }\r\n  }, [user]);\r\n  useEffect(() => {\r\n    user.address.map((add) =>\r\n      add.id === addressId ? chooseAddressHandler(add) : add\r\n    );\r\n  }, [user, addressId]);\r\n  const handleForm = (e) =>\r\n    setAddressData({ ...addressData, [e.target.name]: e.target.value });\r\n  return (\r\n    <AddressWrapper>\r\n      <h2>My account</h2>\r\n      <div className=\"line\"></div>\r\n      <h2>Addresses</h2>\r\n      <div className=\"choose-address\">\r\n        {user?.address?.map((address) => (\r\n          <Address\r\n            key={address._id}\r\n            chooseAddressHandler={chooseAddressHandler}\r\n            address={address}\r\n            userId={user._id}\r\n            setAddressId={setAddressId}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div className=\"line\"></div>\r\n      <Button onClick={() => newAddressHandler()} label=\"Add new address\" />\r\n      <div className=\"inputs-grid\">\r\n        {addressInputs.map((input) => (\r\n          <div key={input.label} className=\"grid-item\">\r\n            <Input\r\n              label={input.label}\r\n              name={input.name}\r\n              value={addressData[input.name]}\r\n              type={input.type}\r\n              handleChange={(e) => handleForm(e)}\r\n              required={input.required}\r\n            />\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <Button\r\n        onClick={() => addressHandler()}\r\n        label={action === \"change\" ? \"Save changes\" : \"Add\"}\r\n        variant=\"black\"\r\n      />\r\n    </AddressWrapper>\r\n  );\r\n};\r\n\r\nconst AddressWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 2rem;\r\n  @media screen and (max-width: 1000px) {\r\n    margin: 0;\r\n  }\r\n  .choose-address {\r\n    display: flex;\r\n    align-items: start;\r\n    .active-address {\r\n      .checkbox {\r\n        background-color: black;\r\n      }\r\n    }\r\n    .single-address {\r\n      display: flex;\r\n      font-size: 0.8rem;\r\n      &:hover {\r\n        cursor: pointer;\r\n      }\r\n      .checkbox {\r\n        border: 1px solid rgba(0, 0, 0, 0.2);\r\n        width: 1rem;\r\n        height: 1rem;\r\n        margin: 0 1rem;\r\n        @media screen and (max-width: 1000px) {\r\n          width: 1rem;\r\n          height: 1rem;\r\n          border-radius: 1rem;\r\n          margin: 0 0.5rem;\r\n        }\r\n      }\r\n      .address-info {\r\n        display: flex;\r\n        flex-direction: column;\r\n        p {\r\n          margin: 5px 0;\r\n          font-weight: bold;\r\n          &:hover {\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .button-white {\r\n    @media screen and (max-width: 1000px) {\r\n      display: flex;\r\n      text-transform: upperCase;\r\n      justify-content: center;\r\n      width: 100%;\r\n      background-color: black;\r\n      margin: 1rem 0;\r\n      padding: 0;\r\n      font-size: 1.5rem;\r\n      color: White;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default AddressComponent;\r\n"]},"metadata":{},"sourceType":"module"}